{% extends "base.html" %}
{% block title %}Checkout{% endblock %}
{% block style %}<link rel="stylesheet" href="/static/styles/checkout.css">{% endblock %}
{% block content %}
{% from "includes/_formhelper.html" import render_field %}
<header><h1>CHECKOUT</h1></header>
<div id="content">
    <div id="left">
        <div id="email" class="box">
            <div id="email_header">
                <h4 class="bold">EMAIL ADDRESS</h4>
            </div>
            <div>
                <span>{{user.get_email()}}</span>
            </div>
        </div>

        <div id="delivery-option" class="box">
                <div id="delivery-option_header">
                    <h4 class="bold">DELIVERY OPTIONS</h4>
                </div>
                {% if completedForm != "" %}
                <div class = 'displayDetails'>
                  <div class="streetName">
                    <h3>Street Name</h3>
                      <p>{{completedForm.get_street_name()}}</p>
                  </div>

                  <div class="postalCode">
                    <h3>Postal Code</h3>
                      <p>{{completedForm.get_postal_code()}}</p>
                  </div>

                  <div class="unitNo">
                    <h3>Unit Number</h3>
                      <p>{{completedForm.get_unit_no()}}</p>
                  </div>

                  <div class="date">
                    <h3>Date</h3>
                      <p>{{completedForm.get_date()}}</p>
                  </div>

                  <div class="time">
                    <h3>Time</h3>
                      <p>{{completedForm.get_time()}}</p>
                  </div>
                </div>

                {% else %}
                <form class="delivery" action = "{{url_for('checkout')}}" method= "POST" >
                  <div class="form-group">
                    {{ render_field(form.street_name, class="form-control") }}
                  </div>
                  <div class="form-group">
                    {{ render_field(form.postal_code, class="") }}
                  </div>
                  <div class="form-group">
                    {{ render_field(form.unit_no, class="form-control") }}
                  </div>
                  <div class="form-group">
                    {{ render_field(form.date, class="form-control") }}
                  </div>

                  <div class="form-group">
                    {{ render_field(form.time, class="form-control") }}
                  </div>

                  <div class="form-group">
                    <button type="submit" class="btn btn-primary center-block">Submit</button>
                  </div>
                </form>

                {% endif %}
            </div>

            <div id="payment" class="box">
                    <div id="payment_header">
                        <h4 class="bold">PAYMENT</h4>
                    </div>
                    <div id="section1">
                        <div id="billing-address">
                            <span class="bold">BILLING ADDRESS</span>
                            <p>name</p>
                            <p>address</p>
                            <p>postal code</p>
                            <p>phone number</p>
                        </div>
                        <div>
                            <button>Change</button>
                        </div>
                    </div>
                <hr>
                <div id="section2">
                        <div id="payment-details">
                            <span class="bold">PAYMENT DETAILS</span>
                            <div class="payment-row">
                                <span>Cardholder name</span>
                                <input type="text">
                            </div>
                            <div class="payment-row">
                                <p>Credit card number</p>
                                <input type="text">
                            </div>
                            <div class="payment-row">
                                <p>Expiry date</p>
                                <input type="date">
                            </div>
                            <div class="payment-row">
                                <p>CVV</p>
                                <input type="text">
                            </div>
                        </div>
                        <div class="order">
                          <form action="{{url_for('deliveryInvoice', email=user.get_email(), total=total)}}" method="post">
                            <button>Order</button>
                          </form>

                        </div>
                    </div>
                </div>
    </div>
    <div id="right-sticky">
            <div class="inner-items">
              <section class="bag">
              <div class="bag-header">
                <h2 id=item-number>{{number}} items</h2>
                <a id="edit" href="/cart">Edit</a>
            </div>
            <hr id="header-line">
            <div class="item-list">
              <div class="item-wrapper">
                <ul id="items">
                  {% for product in cart %}
                    <li class="item">
                      <img src="/static/images/{{product.get_thumbnail()}}">
                        <div class="details ">
                          <span class="item-price">{{product.get_price()}}</span>
                          <span class="item-name">{{product.get_product_name()}}</span>
                          <div class="item-options-wrapper">
                            <span class="item-brand">{{product.get_brand()}}</span>
                            <span class="item-quantity">Qty: <strong>1</strong></span>
                          </div>
                        </div>
                  </li>
                  <hr>
                  {% endfor %}
                </ul>
                </div>
              </div>
            </section>

              <div id="sum">
                  <hr>
                  <table>
                    <tfoot>
                      <tr class="total">
                        <td class="l-ltc">
                          <div>Total to pay</div>
                        </td>
                        <td class="l-rtc">
                          <div>{{total}}</div>
                        </td>
                      </tr>
                    </tfoot>
                    <tbody>
                      <tr class="sub-total">
                        <td class="l-ltc">
                          <div>Subtotal</div>
                        </td>
                        <td class="l-rtc">
                          <div>{{total}}</div>
                        </td>
                      </tr>
                      <tr class="delivery">
                        <td class="l-ltc">
                          <div>Delivery</div>
                        </td>
                        <td class="l-rtc">
                          <div>Free</div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
          </div>
<!--Modal-->
<div id="input-discount" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Discount Code</h4>
            </div>
            <div class="modal-body">
                <div>Please enter your discount code</div>
                <input type="text">
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal">Confirm</button>
            </div>
        </div>
    </div>
</div>
</div>
{%endblock%}
