{% extends "admin_base.html" %}
{% block title %}Edit Product{% endblock %}
{% block style %}<link rel="stylesheet" href="/static/styles/productSettings.css">{% endblock %}
{% block headScript %}

{% endblock %}

{% block content %}
{% from "includes/_formhelper.html" import render_field %}
<div class="row justify-content-center">
    <div class="col-md-8 pb-4">
        <h1 class="my-4">Product Settings</h1>

        <form method="POST" action="" enctype="multipart/form-data" onsubmit="CheckImageSize();">
          <div class="form-group">
              {{ render_field(form.productName, class="form-control") }}
          </div>

          <div class="form-group">
            <label>Thumbnail</label>
            <div class="custom-file">
              <input type="file" class="custom-file-input" name="image" id="image" accept=".jpg, .jpeg, .png" value="label">
              <label class="custom-file-label" for="image">{{ label }}</label>
            </div>
          </div>

          <div class="row form-group">
            <div class="col-md-4">
                {{ render_field(form.subCategory, class="form-control") }}
            </div>
            <div class="col-md-4">
                {{ render_field(form.brand, class="form-control") }}
            </div>
            <div class="col-md-4">
                {{ render_field(form.serialNo, class="form-control", readonly=True) }}
            </div>
          </div>

          <div class="row form-group">
            <div class="col-md-4">
                {{ render_field(form.price, class="form-control") }}
            </div>
            <div class="col-md-4">
                {{ render_field(form.quantity, class="form-control") }}
            </div>
            <div class="col-md-4">
                {{ render_field(form.stockThreshold, class="form-control") }}
            </div>
          </div>

          <div class="form-group">
              {{ render_field(form.description, class="form-control") }}
          </div>

          <div class="form-group">
              Activate Product
              <label class="switch">
                {{ render_field(form.activated, class="form-control align-middle") }}
                <span class="slider round"></span>
              </label>
          </div>

          <a href="/products/name/ascending" class="btn mr-2 grayButton">Cancel</a>
          <input type="submit" value="Submit" class="btn"/>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  $(".custom-file-input").on("change", function() {
    var fileName = $(this).val().split("\\").pop();
    $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
  });

  $(document).ready(function () {
    $('select').selectize({
        sortField: 'text'
    });
  });
</script>
{% endblock %}
